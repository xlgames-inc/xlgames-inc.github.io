<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="XL Games">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
<link href='/assets/stylesheets/bootstrap.min-93b47f97c3444c4711853ed5140d82a1.css' type='text/css' rel='stylesheet' media='all'>
<link href='/assets/stylesheets/style-1dcb1d39791f3457afa56d279fcf0945.css' type='text/css' rel='stylesheet' media='all'>
<link href='/assets/stylesheets/google_prettify/sons-of-obsidian-5e05343fd0c18e0a05231023b643245c.css' type='text/css' rel='stylesheet' media='all'>
    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container-narrow">
          <a class="brand" href="/">XLE development blog</a>
          <ul class="nav">
              
                <li><a href="/tags">Tags</a></li>
              
              
                <li><a href="/archive">Archive</a></li>
              
              
                <li><a href="/about">About</a></li>
              
          </ul>
        </div>
      </div>
    </div>

    <div class="container-narrow">

      <div class="content">
        <div class="row-fluid">
  <div class="span12">
      <div class="_root">
        <h3 class="title"><a href="/about">About</a><br/> <span class="date"></span></h3>

        <div class="summary">
<p>XLE is an open-source game engine (currently in development).</p>

<p>Find us on Github:
    <a href="https://github.com/xlgames-inc/XLE">https://github.com/xlgames-inc/XLE</a></p>

<p>Documentation starting point:
    <a href="https://github.com/xlgames-inc/XLE/wiki">https://github.com/xlgames-inc/XLE/wiki</a></p>
</div>

        <div class="more">
          <a href="/about" class="btn btn-small">read more..</a>
        </div>
      </div>
      <div class="_root">
        <h3 class="title"><a href="/archive">Archive</a><br/> <span class="date"></span></h3>

        <div class="summary ellipsis">
  <h2>2016</h2>
    <h3>April</h3>
    <ul>
      <li>
<span>April 12, 2016</span> » <a href="/posts/vulkantips">Important Vulkan tips</a>
</li>
      <li>
<span>April 08, 2016</span> » <a href="/posts/vulkanprototypeslowprogress">Vulkan prototype slowly progressing</a>
</li>
      <li>
<span>April 05, 2016</span> » <a href="/posts/vulkanshaderprototype">HLSL shader prototype with Vulkan</a>
</li>
      <li>
<span>April 04, 2016</span> » <a href="/posts/vulkan">Starting to experiment with Vulkan</a>
</li>
    </ul>
    <h3>March</h3>
    <ul>
      <li>
<span>March 31, 2016</span> » <a href="/posts/compareoitrans">Comparing different methods for order independent transparency</a>
</li>
      <li>
<span>March 30, 2016</span> » <a href="/posts/envshots">Environment Rendering Screenshots</a>
</li>
      <li>
<span>March 26, 2016</span> » <a href="/posts/release0040">Release v0.04.0</a>
</li>
      <li>
<span>March 25, 2016</span> » <a href="/posts/environmentsample">Environment Sample Streamlining</a>
</li>
      <li>
<span>March 14, 2016</span> » <a href="/posts/newtoolfeatures">Latest Tool Features</a>
</li>
    </ul>
    <h3>February</h3>
    <ul>
      <li>
<span>February 05, 2016</span> » <a href="/posts/transmittedspecular3">Transmitted specular</a>
</li>
      <li>
<span>February 01, 2016</span> » <a href="/posts/improvedibl">Improved IBL</a>
</li>
    </ul>
</div>

        <div class="more">
          <a href="/archive" class="btn btn-small">read more..</a>
        </div>
      </div>
      <div class="_root">
        <h3 class="title"><a href="/categories">Categories</a><br/> <span class="date"></span></h3>

        <div class="summary ellipsis">
<ul class="tag_box inline">
  <li>
    <a href="/categories#XLE-ref">XLE <span>21</span></a>
  </li>
  <li>
    <a href="/categories#blog-ref">blog <span>1</span></a>
  </li>
</ul>

  <h3>XLE (21)</h3>
  <ul>
      <li><a href="/posts/arealightsandpbr">Area Lights with Physically Based Rendering</a></li>
      <li><a href="/posts/assetpathscripts">Processing textures with the XLE scriptable asset path</a></li>
      <li><a href="/posts/compareoitrans">Comparing different methods for order independent transparency</a></li>
      <li><a href="/posts/environmentsample">Environment Sample Streamlining</a></li>
      <li><a href="/posts/envshots">Environment Rendering Screenshots</a></li>
      <li><a href="/posts/functionlinkedshaders">Dynamic Function Linking Graph for Shaders</a></li>
      <li><a href="/posts/improvedibl">Improved IBL</a></li>
      <li><a href="/posts/materialtool">Material and Node Diagram Tool</a></li>
      <li><a href="/posts/newtoolfeatures">Latest Tool Features</a></li>
      <li><a href="/posts/rectlightdiffuse">Rectangle Light diffuse vs 3DS Max</a></li>
      <li><a href="/posts/release0040">Release v0.04.0</a></li>
      <li><a href="/posts/transmissionnodegraph">Transmission Node Diagram</a></li>
      <li><a href="/posts/transmittedspecular">Transmitted specular</a></li>
      <li><a href="/posts/transmittedspecular2">Transmitted specular progress</a></li>
      <li><a href="/posts/transmittedspecular3">Transmitted specular</a></li>
      <li><a href="/posts/vulkan">Starting to experiment with Vulkan</a></li>
      <li><a href="/posts/vulkanprototypeslowprogress">Vulkan prototype slowly progressing</a></li>
      <li><a href="/posts/vulkanshaderprototype">HLSL shader prototype with Vulkan</a></li>
      <li><a href="/posts/vulkantips">Important Vulkan tips</a></li>
      <li><a href="/posts/whattodofirst">What to do first</a></li>
      <li><a href="/posts/workingonrectlights">Working some improvements to rectangle lights</a></li>
  </ul>
</div>

        <div class="more">
          <a href="/categories" class="btn btn-small">read more..</a>
        </div>
      </div>
      <div class="_root">
        <h3 class="title"><a href="/">Home</a><br/> <span class="date"></span></h3>

        <div class="summary ellipsis">
<p>After 1 week of playing around with Vulkan, here are 4 tips I've learned. These are maybe not very obvious (some aren't clearly documented), but I think they're important to know.</p>

<h2 id="toc_0">1. Use buffers as staging areas to initialize images</h2>

<p>The crux of this is we need to use a function, <em>vkCmdCopyBufferToImage</em>, to implement staging images with Vulkan. It's almost impossible to do any graphics work with Vulkan without doing this -- but a first glance it might seem a bit counter-intuitive. First a bit of a background.</p>

<p>Vulkan images have a "tiling" property, which can be either "linear" or "optimal." This is property relates to how pixels are arranged in memory within a single mip level.</p>

<p>In linear tiling, texels are arranged in row by row, column by column. So a texel's linear address follows this pattern:</p>

<pre><code>address = (y*rowPitch) + x*bitsPerPixel/8
</code></pre>

<p>When we have images on disk, we usually expect them to have this tiling.</p>

<p>However, this has a big problem. Texels in the same row will be near each other in memory. But texels in the same column will be quite separate in memory.</p>

<p>Given that images can be mapped arbitrarily on the final 2D triangles, we can't control the order in which the GPU will access the texels. So this is big issue for the memory cache.</p>

<p>So all GPUs are able to rearrange the texels into a "swizzled" order that tries to guarantee that nearby texels in 2D (or 3D) image space will be nearby in linear memory. This is called "optimal" tiling in Vulkan.</p>

</div>

        <div class="more">
          <a href="/" class="btn btn-small">read more..</a>
        </div>
      </div>
      <div class="_root">
        <h3 class="title"><a href="/pages">Pages</a><br/> <span class="date"></span></h3>

        <div class="summary">
<ul>
  
    <li><a href="/about">About</a></li>
  
  
    <li><a href="/archive">Archive</a></li>
  
  
    <li><a href="/categories">Categories</a></li>
  
  
    <li><a href="/">Home</a></li>
  
    <li class="active"><a href="/pages" class="active">Pages</a></li>
  
  
  
    <li><a href="/tags">Tags</a></li>
  
</ul>
</div>

        <div class="more">
          <a href="/pages" class="btn btn-small">read more..</a>
        </div>
      </div>
    
    <div class="pagination">
      <ul>
          <li class="active"><a href="/index/1">1</a></li>
          <li><a href="/index/2">2</a></li>
      </ul>
    </div>
  </div>
</div>

      </div>

      <hr>
      <div class="footer">
        <p>&copy; XL Games 2015
          with help from <a href="http://ruhoh.com" target="_blank" title="The Definitive Technical Blogging Framework">ruhoh</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
        </p>
      </div>

    </div> <!-- /container -->

    <!-- Google Prettify -->
<script src="http://cdnjs.cloudflare.com/ajax/libs/prettify/188.0.0/prettify.js"></script>
<script>
  var pres = document.getElementsByTagName("pre");
  for (var i=0; i < pres.length; ++i) {
    pres[i].className = "prettyprint linenums";
  }
  prettyPrint();
</script>
<!-- end Google Prettify -->
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-71034032-1']);
  _gaq.push(['_trackPageview']);
  

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


    
  </body>
</html>
